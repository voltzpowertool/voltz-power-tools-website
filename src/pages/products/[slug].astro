---
import Layout from '@/layouts/Layout.astro';
import productsData from '@/data/products.json';

// Generate static paths for all products
export async function getStaticPaths() {
  return productsData.map((product) => ({
    params: { slug: product.id },
    props: { product }
  }));
}

const { product } = Astro.props;

// Related products - intelligent selection
let relatedProducts = productsData
  .filter(p => p.category === product.category && p.id !== product.id)
  .slice(0, 3);

// If not enough products in same category, fill with other categories
if (relatedProducts.length < 2) {
  const otherProducts = productsData
    .filter(p => p.category !== product.category && p.id !== product.id)
    .slice(0, 3 - relatedProducts.length);
  relatedProducts = [...relatedProducts, ...otherProducts];
}

// Only show if we have at least 2 products
const shouldShowRelated = relatedProducts.length >= 2;

// Ensure we have a fallback title
const relatedTitle = relatedProducts.filter(p => p.category === product.category).length > 0 
  ? "Benzer" 
  : relatedProducts.length > 0 
    ? "Diğer" 
    : "Önerilen";

// Get category display name
function getCategoryName(category) {
  const categoryNames = {
    'drill': 'Akülü Darbeli Matkap',
    'driver': product.subcategory || 'Akülü Vidalama',
    'grinder': 'Akülü Taşlama',
    'hammer': 'Akülü Kırıcı Delici',
    'battery': product.subcategory || 'Batarya',
    'charger': product.subcategory || 'Şarj Cihazı',
    'storage': 'Taşıma Kutusu Sistemi'
  };
  return categoryNames[category] || product.subcategory || category;
}
---

<Layout 
  title={`${product.title} - ${getCategoryName(product.category)} | Voltz Power Tools`}
  description={`${product.title} ${getCategoryName(product.category)} özellikleri ve fiyatı. ${product.description} Brushless motor teknolojisi, V-PACK uyumlu batarya sistemi.`}
  keywords={`${product.title}, ${getCategoryName(product.category)}, voltz ${product.category}, ${product.voltage} alet, brushless motor, v-pack uyumlu`}
>

<!-- Product Detail Hero -->
<section class="product-detail-hero">
  <div class="site-background-overlay"></div>
  <div class="container">
    
    

    <!-- Product Header -->
    <div class="product-header">
      <div class="product-badges">
        {product.category !== 'battery' && product.category !== 'charger' && product.category !== 'storage' && (
          <div class="product-badge brushless">BRUSHLESS</div>
        )}
        {(product.category === 'drill' || product.category === 'driver' || product.category === 'hammer' || product.category === 'grinder') && (
          <div class="product-badge heavy-duty">HEAVY DUTY</div>
        )}
      </div>
      
      <h1 class="product-title">{product.title}</h1>
      <p class="product-category">{getCategoryName(product.category)}</p>
    </div>

    <!-- Product Main Content -->
    <div class="product-main">
      
      <!-- Left Side - Features -->
      <div class="product-features-sidebar">
        {product.features.map((feature) => (
          <div class="feature-card">
            <div class="feature-icon">
              ✅
            </div>
            <h4 class="feature-title">{feature}</h4>
            <p class="feature-description">
              {feature.includes('Kömürsüz Motor') && 'Daha yüksek güç, daha az ani ve dayanıklı kullanım ömrü sunan gelişmiş kömürsüz motor.'}
              {feature.includes('LED Işık') && 'Çalışılan alanı aydınatacak ve çalışma alanında mükemmel görünürlük sağlayan entegre LED aydınlatma.'}
              {feature.includes('Hızlı Değiştirme') && '1/4" altıgen hex değiştirme sistemi ile uçları tek hareketle kolayca değiştirebilirsiniz.'}
              {feature.includes('Ayarlanabilir Hız') && 'Farklı malzeme ve uygulamalar adaptasyon için hassas hız kontrolü.'}
              {feature.includes('Metal Mandren') && 'Stabilite ve hassasılık sağlayan yüksek mukavemetli metal mandren sistemi.'}
              {feature.includes('Kare Sürücü') && 'Ağır işler için güçlü performans ve maksimum moment iletimine 1/2" kare sürücü ile adaptasyon.'}
              {feature.includes('Lithium Ion') && 'Uzun pil ömrü ve hızlı şarj özelliği sunan gelişmiş lityum batarya teknolojisi.'}
              {feature.includes('Hızlı Şarj') && 'Kısa sürede bataryanızı şarj edebilmenizi sağlayan hızlı şarj teknolojisi.'}
              {feature.includes('Modüler Sistem') && 'İhtiyaçlarınıza göre özelleştirilebilir ve genişletilebilir modüler tasarım.'}
              {!feature.includes('Kömürsüz Motor') && !feature.includes('LED Işık') && !feature.includes('Hızlı Değiştirme') && !feature.includes('Ayarlanabilir Hız') && !feature.includes('Metal Mandren') && !feature.includes('Kare Sürücü') && !feature.includes('Lithium Ion') && !feature.includes('Hızlı Şarj') && !feature.includes('Modüler Sistem') && 'Profesyonel kullanım için özel tasarlanmış kaliteli özellik.'}
            </p>
          </div>
        ))}
      </div>

      <!-- Center - Product Image Slider -->
      <div class="product-image-main">
        <div class="product-image-slider">
          <!-- Main Product Image -->
          <div class="product-image-container-main" id="mainImageContainer">
            <img src={product.images[0]} alt={product.title} class="product-image-main-img" id="mainProductImage" data-hd-src={product.imagesHd[0]}>
            
            <!-- Click to Zoom Overlay -->
            <div class="click-zoom-overlay">
              <div class="zoom-icon">🔍</div>
              <span class="zoom-text">Büyütmek için tıklayın</span>
            </div>
            
            <!-- Battery Icon -->
            {product.voltage && product.voltage !== 'N/A' && product.category !== 'storage' && (
              <div class="product-voltage-badge">
                <div class="voltage-badge-main">
                  <span class="voltage-number">{product.voltage.replace('VDC', 'V')}</span>
                  <div class="voltage-label">
                    <span class="vpack-text">V-PACK</span>
                    <span class="lithium-text">LITHIUM</span>
                    {product.capacity && <span class="capacity-text">{product.capacity}</span>}
                  </div>
                </div>
              </div>
            )}
          </div>
          
          <!-- Thumbnail Gallery -->
          <div class="product-thumbnails">
            {product.images.map((imageUrl, index) => (
              <div class={`thumbnail-item ${index === 0 ? 'active' : ''}`} data-image={imageUrl} data-hd-image={product.imagesHd[index]}>
                <img src={imageUrl} alt={`${product.title} - ${index === 0 ? 'Ana' : index === 1 ? 'Yan' : 'Arka'} görsel`} class="thumbnail-img">
              </div>
            ))}
          </div>
        </div>
      </div>

      <!-- Image Modal/Lightbox -->
      <div class="image-modal" id="imageModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          
          <div class="modal-image-container">
            <img src="" alt={product.title} class="modal-image">
            <div class="modal-image-bg"></div>
          </div>
          
          <!-- Modal Thumbnails -->
          <div class="modal-thumbnails">
            {product.imagesHd.map((imageUrl, index) => (
              <div class={`modal-thumbnail-item ${index === 0 ? 'active' : ''}`}>
                <img src={product.images[index]} alt={`${product.title} - ${index === 0 ? 'Ana' : index === 1 ? 'Yan' : 'Arka'} görsel`} class="modal-thumbnail-img">
              </div>
            ))}
          </div>
          
          <!-- Modal Navigation -->
          <div class="modal-navigation">
            <button class="modal-nav-btn modal-nav-prev">❮</button>
            <button class="modal-nav-btn modal-nav-next">❯</button>
          </div>
        </div>
      </div>

      <!-- Right Side - Package Info -->
      <div class="package-info-sidebar">
        {product.batteryIncluded && product.category !== 'storage' && (
          <div class="package-content-card">
            <div class="package-header">
              <div class="package-icon">📦</div>
              <h4 class="package-title">Paket İçeriği</h4>
            </div>
            
            <div class="package-list">
              <div class="package-item">
                <div class="item-icon"></div>
                <span class="item-text">1x {product.title} Alet</span>
                <div class="item-check">✓</div>
              </div>
              <div class="package-item">
                <div class="item-icon"></div>
                <span class="item-text">2x {product.voltage} Batarya</span>
                <div class="item-check">✓</div>
              </div>
              <div class="package-item">
                <div class="item-icon"></div>
                <span class="item-text">1x Hızlı Şarj Cihazı</span>
                <div class="item-check">✓</div>
              </div>
              <div class="package-item">
                <div class="item-icon"></div>
                <span class="item-text">Kullanım Kılavuzu</span>
                <div class="item-check">✓</div>
              </div>
              <div class="package-item">
                <div class="item-icon"></div>
                <span class="item-text">Garanti Belgesi</span>
                <div class="item-check">✓</div>
              </div>
            </div>
            
            <div class="package-badge">
              <div class="vpack-logo">V-PACK</div>
              <span class="compatible-text">Uyumlu Sistem</span>
            </div>
          </div>
        )}
        
        {product.category === 'battery' && (
          <div class="package-content-card">
            <div class="package-header">
              <div class="package-icon"></div>
              <h4 class="package-title">Batarya Özellikleri</h4>
            </div>
            
            <div class="battery-specs">
              <div class="spec-circle">
                <div class="spec-value">{product.voltage}</div>
                <div class="spec-label">Voltaj</div>
              </div>
              <div class="spec-circle">
                <div class="spec-value">{product.capacity}</div>
                <div class="spec-label">Kapasite</div>
              </div>
              <div class="spec-circle">
                <div class="spec-value">{product.energy}</div>
                <div class="spec-label">Enerji</div>
              </div>
            </div>
          </div>
        )}
        
        {product.category === 'storage' && (
          <div class="package-content-card">
            <div class="package-header">
              <div class="package-icon"></div>
              <h4 class="package-title">Sistem Özellikleri</h4>
            </div>
            
            <div class="storage-features">
              <div class="storage-feature">
                <div class="feature-icon"></div>
                <span>Modüler İstiflenebilir</span>
              </div>
              <div class="storage-feature">
                <div class="feature-icon"></div>
                <span>Güvenli Kilit Sistemi</span>
              </div>
              <div class="storage-feature">
                <div class="feature-icon"></div>
                <span>Ergonomik Taşıma</span>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>

    <!-- Technical Specifications -->
    <div class="tech-specs">
      <div class="tech-specs-header">
        <h3 class="tech-specs-title">TEKNİK ÖZELLİKLER</h3>
      </div>
      
      <div class="tech-specs-table">
        <div class="spec-row">
          <span class="spec-label">MODEL</span>
          <span class="spec-value">{product.id.toUpperCase()}</span>
        </div>
        
        {product.chuck && (
          <div class="spec-row">
            <span class="spec-label">{product.category === 'drill' ? 'METAL MANDREN' : 'BAĞLANTI ÇIKIŞI'}</span>
            <span class="spec-value">{product.chuck}</span>
          </div>
        )}
        
        {product.torque && product.torque !== 'N/A' && (
          <div class="spec-row">
            <span class="spec-label">{product.category === 'drill' ? 'MAXIMUM TORK' : 'İLERİ TORK'}</span>
            <span class="spec-value">{product.torque}</span>
          </div>
        )}
        
        {product.speed && product.speed !== 'N/A' && (
          <div class="spec-row">
            <span class="spec-label">YÜKSÜZ HIZ</span>
            <span class="spec-value">{product.speed}</span>
          </div>
        )}
        
        {product.bpm && product.bpm !== 'N/A' && (
          <div class="spec-row">
            <span class="spec-label">DARBE FREKANSI</span>
            <span class="spec-value">{product.bpm}</span>
          </div>
        )}
        
        {product.diskSize && (
          <div class="spec-row">
            <span class="spec-label">DİSK ÇAPI</span>
            <span class="spec-value">{product.diskSize}</span>
          </div>
        )}
        
        {product.cuttingDepth && (
          <div class="spec-row">
            <span class="spec-label">MAXIMUM KESME DERİNLİĞİ</span>
            <span class="spec-value">{product.cuttingDepth}</span>
          </div>
        )}
        
        {product.drillDiameter && (
          <div class="spec-row">
            <span class="spec-label">DELME ÇAPI</span>
            <span class="spec-value">{product.drillDiameter}</span>
          </div>
        )}
        
        {product.impactEnergy && (
          <div class="spec-row">
            <span class="spec-label">DARBE ENERJİSİ</span>
            <span class="spec-value">{product.impactEnergy}</span>
          </div>
        )}
        
        {product.capacity && (
          <div class="spec-row">
            <span class="spec-label">{product.category === 'storage' ? 'KAPASİTE' : 'KAPASİTE'}</span>
            <span class="spec-value">{product.capacity}</span>
          </div>
        )}
        
        {product.energy && (
          <div class="spec-row">
            <span class="spec-label">ENERJİ</span>
            <span class="spec-value">{product.energy}</span>
          </div>
        )}
        
        {product.current && (
          <div class="spec-row">
            <span class="spec-label">ÇIKIŞ</span>
            <span class="spec-value">{product.current}</span>
          </div>
        )}
        
        {product.dimensions && (
          <div class="spec-row">
            <span class="spec-label">BOYUTLAR</span>
            <span class="spec-value">{product.dimensions}</span>
          </div>
        )}
        
        {product.weight && (
          <div class="spec-row">
            <span class="spec-label">AĞIRLIK</span>
            <span class="spec-value">{product.weight}</span>
          </div>
        )}
      </div>
    </div>

        </div>
    </section>

    <!-- Fullscreen Image Modal -->
    <div class="image-modal" id="imageModal">
      <div class="modal-backdrop" id="modalBackdrop"></div>
      
      <div class="modal-content">
        <!-- Close Button -->
        <button class="modal-close" id="modalClose" aria-label="Kapat">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
        
        <!-- Modal Image -->
        <div class="modal-image-container">
          <img src="/img/products/produts01.png" alt={product.title} class="modal-image" id="modalImage">
        </div>
        
        <!-- Modal Thumbnails -->
        <div class="modal-thumbnails">
          <div class="modal-thumbnail-item active" data-modal-image="/img/products/produts01.png">
            <img src="/img/products/produts01.png" alt={`${product.title} - Ana görsel`} class="modal-thumbnail-img">
          </div>
          <div class="modal-thumbnail-item" data-modal-image="/img/products/produts01.png">
            <img src="/img/products/produts01.png" alt={`${product.title} - Detay 1`} class="modal-thumbnail-img">
          </div>
          <div class="modal-thumbnail-item" data-modal-image="/img/products/produts01.png">
            <img src="/img/products/produts01.png" alt={`${product.title} - Detay 2`} class="modal-thumbnail-img">
          </div>
          <div class="modal-thumbnail-item" data-modal-image="/img/products/produts01.png">
            <img src="/img/products/produts01.png" alt={`${product.title} - Paket`} class="modal-thumbnail-img">
          </div>
        </div>
        
        <!-- Modal Navigation -->
        <div class="modal-navigation">
          <button class="modal-nav-btn modal-prev" id="modalPrev" aria-label="Önceki">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          </button>
          <button class="modal-nav-btn modal-next" id="modalNext" aria-label="Sonraki">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Related Products -->
{shouldShowRelated && (
  <section class="related-products-section">
    <div class="container">
      <h2 class="related-title">
        {relatedTitle} <span class="highlight-text">Ürünler</span>
      </h2>
      
      <div class={`related-products-grid ${relatedProducts.length === 2 ? 'two-products' : ''}`}>
        {relatedProducts.map((relatedProduct) => (
          <div class="related-product-card">
            <div class="related-product-image">
              <img src="/img/products/produts01.png" alt={relatedProduct.title} class="related-image">
              {relatedProduct.voltage && relatedProduct.voltage !== 'N/A' && relatedProduct.category !== 'storage' && (
                <div class="related-voltage-icon">
                  <img 
                    src={relatedProduct.voltage && relatedProduct.voltage.includes("20") ? "/icons/20pack-icon.svg" : "/icons/16.8pack-icon.svg"} 
                    alt={relatedProduct.voltage} 
                    class="voltage-icon"
                  >
                </div>
              )}
            </div>
            <div class="related-product-info">
              <h3 class="related-product-name">{relatedProduct.title}</h3>
              <p class="related-product-specs">
                {relatedProduct.voltage && relatedProduct.voltage !== 'N/A' ? relatedProduct.voltage : ''}
                {relatedProduct.voltage && relatedProduct.voltage !== 'N/A' && relatedProduct.torque && relatedProduct.torque !== 'N/A' ? ' • ' : ''}
                {relatedProduct.torque && relatedProduct.torque !== 'N/A' ? relatedProduct.torque : ''}
                {(!relatedProduct.torque || relatedProduct.torque === 'N/A') && relatedProduct.capacity ? relatedProduct.capacity : ''}
              </p>
              <a href={`/products/${relatedProduct.id}`} class="related-product-link">Detayları Gör →</a>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
)}

<!-- Footer from index.astro -->
<footer class="footer-section">
  <div class="container">
    <div class="footer-content">
      <!-- Footer Logo -->
      <div class="footer-logo">
        <img src="/img/logo/footer-logo.svg" alt="Voltz Power Tools" class="footer-logo-img">
      </div>
      
      <!-- Footer Main Content -->
      <div class="footer-main">
        <!-- Company Info -->
        <div class="footer-company">
          <h4 class="footer-company-title">Voltz Power Tools</h4>
          <p class="footer-company-desc">
            Profesyonel el aletlerinde güvenin adresi.
          </p>
        </div>
        
        <!-- Contact Info -->
        <div class="footer-contact">
          <div class="footer-address">
            <p class="footer-contact-title">Adres</p>
            <p class="footer-contact-text">
              Teknoloji Caddesi No: 123<br>
              Sanayi Mahallesi, İstanbul<br>
              Türkiye 34000
            </p>
          </div>
          
          <div class="footer-email">
            <p class="footer-contact-title">İletişim</p>
            <p class="footer-contact-text">
              E-posta: <a href="mailto:info@voltzpowertools.com" class="footer-link">info@voltzpowertools.com</a><br>
              Telefon: <a href="tel:+902123456789" class="footer-link">+90 212 345 67 89</a>
            </p>
          </div>
        </div>
      </div>
      
      <!-- Footer Bottom -->
      <div class="footer-bottom">
        <!-- Social Media -->
        <div class="footer-social">
          <a href="#" class="social-link" aria-label="LinkedIn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
          </a>
          <a href="#" class="social-link" aria-label="Instagram">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
            </svg>
          </a>
        </div>
        
        <!-- Copyright -->
        <div class="footer-copyright">
          <p>© 2025 Voltz Power Tools. Tüm hakları saklıdır.</p>
        </div>
      </div>
    </div>
  </div>
</footer>

</Layout>

<script>
// Product Image Slider & Modal Functionality
document.addEventListener('DOMContentLoaded', function() {
  const mainImage = document.getElementById('mainProductImage');
  const mainImageContainer = document.getElementById('mainImageContainer');
  const thumbnails = document.querySelectorAll('.thumbnail-item');
  
  // Modal Elements
  const imageModal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  const modalClose = document.getElementById('modalClose');
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalThumbnails = document.querySelectorAll('.modal-thumbnail-item');
  const modalPrev = document.getElementById('modalPrev');
  const modalNext = document.getElementById('modalNext');
  
  let currentImageIndex = 0;
  const images = [
    '/img/products/produts01.png',
    '/img/products/produts01.png', 
    '/img/products/produts01.png',
    '/img/products/produts01.png'
  ];
  
  // Thumbnail Click Handler (Main Page)
  thumbnails.forEach((thumbnail, index) => {
    thumbnail.addEventListener('click', function() {
      const newImageSrc = this.getAttribute('data-image');
      currentImageIndex = index;
      
      // Update main image
      mainImage.src = newImageSrc;
      
      // Update active thumbnail
      thumbnails.forEach(t => t.classList.remove('active'));
      this.classList.add('active');
    });
  });
  
  // Open Modal on Main Image Click
  mainImageContainer.addEventListener('click', function() {
    openModal();
  });
  
  // Modal Functions
  function openModal() {
    imageModal.classList.add('active');
    modalImage.src = images[currentImageIndex];
    updateModalThumbnails();
    document.body.style.overflow = 'hidden';
  }
  
  function closeModal() {
    imageModal.classList.remove('active');
    document.body.style.overflow = '';
  }
  
  function updateModalThumbnails() {
    modalThumbnails.forEach((thumb, index) => {
      thumb.classList.toggle('active', index === currentImageIndex);
    });
    
    // Update navigation buttons
    modalPrev.disabled = currentImageIndex === 0;
    modalNext.disabled = currentImageIndex === images.length - 1;
  }
  
  function changeModalImage(index) {
    currentImageIndex = index;
    modalImage.src = images[currentImageIndex];
    updateModalThumbnails();
  }
  
  function nextImage() {
    if (currentImageIndex < images.length - 1) {
      changeModalImage(currentImageIndex + 1);
    }
  }
  
  function prevImage() {
    if (currentImageIndex > 0) {
      changeModalImage(currentImageIndex - 1);
    }
  }
  
  // Modal Event Listeners
  // Universal modal close handler
  function handleModalClick(e) {
    const isClickableElement = e.target.matches('button, img, .modal-thumbnail-item, .modal-nav-btn, .modal-close, .modal-image');
    
    // Don't close if clicked on interactive elements
    if (isClickableElement) {
      return;
    }
    
    // Close modal for backdrop, modal overlay, or empty content areas
    if (e.target === imageModal || 
        e.target === modalBackdrop || 
        e.target.classList.contains('modal-content') ||
        e.target.classList.contains('modal-thumbnails') ||
        e.target.classList.contains('modal-navigation')) {
      closeModal();
    }
  }
  
  // Add event listeners for modal closing
  modalBackdrop.addEventListener('click', closeModal);
  imageModal.addEventListener('click', handleModalClick);
  
  // Specific close button handler
  modalClose.addEventListener('click', function(e) {
    e.stopPropagation();
    closeModal();
  });
  
  modalThumbnails.forEach((thumb, index) => {
    thumb.addEventListener('click', function() {
      changeModalImage(index);
    });
  });
  
  modalNext.addEventListener('click', nextImage);
  modalPrev.addEventListener('click', prevImage);
  
  // Keyboard Navigation
  document.addEventListener('keydown', function(e) {
    if (!imageModal.classList.contains('active')) return;
    
    if (e.key === 'Escape') {
      closeModal();
    } else if (e.key === 'ArrowRight') {
      nextImage();
    } else if (e.key === 'ArrowLeft') {
      prevImage();
    }
  });
  
  // Touch support for mobile
  let touchStartX = null;
  let touchStartY = null;
  let touchStartTarget = null;
  
  imageModal.addEventListener('touchstart', function(e) {
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
    touchStartTarget = e.target;
  });
  
  imageModal.addEventListener('touchend', function(e) {
    if (!imageModal.classList.contains('active') || touchStartX === null) return;
    
    const touchEndX = e.changedTouches[0].clientX;
    const touchEndY = e.changedTouches[0].clientY;
    const diffX = touchStartX - touchEndX;
    const diffY = touchStartY - touchEndY;
    
    // Check if it's a tap (not a swipe)
    const isTap = Math.abs(diffX) < 10 && Math.abs(diffY) < 10;
    
    if (isTap) {
      // Check if tapped on an interactive element
      const isClickableElement = touchStartTarget && touchStartTarget.matches && 
        touchStartTarget.matches('button, img, .modal-thumbnail-item, .modal-nav-btn, .modal-close, .modal-image');
      
      // Close modal if tapped on backdrop, modal overlay, or empty content areas (but not interactive elements)
      if (!isClickableElement && (
        touchStartTarget === imageModal || 
        touchStartTarget === modalBackdrop ||
        (touchStartTarget && touchStartTarget.classList && (
          touchStartTarget.classList.contains('modal-content') ||
          touchStartTarget.classList.contains('modal-thumbnails') ||
          touchStartTarget.classList.contains('modal-navigation')
        ))
      )) {
        closeModal();
      }
    } else if (Math.abs(diffX) > 50 && Math.abs(diffY) < 100) {
      // Swipe threshold - only horizontal swipes
      if (diffX > 0) {
        nextImage(); // Swipe left = next image
      } else {
        prevImage(); // Swipe right = previous image
      }
    }
    
    touchStartX = null;
    touchStartY = null;
    touchStartTarget = null;
  });
  
  // Package Items Animation
  const packageItems = document.querySelectorAll('.package-item');
  packageItems.forEach((item, index) => {
    item.style.animationDelay = (index * 0.1) + 's';
    item.classList.add('animate-in');
  });
  
  // Storage Features Animation
  const storageFeatures = document.querySelectorAll('.storage-feature');
  storageFeatures.forEach((feature, index) => {
    feature.style.animationDelay = (index * 0.15) + 's';
    feature.classList.add('animate-in');
  });
});
</script>

<style>
/* Image Modal/Lightbox Styles */
.image-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  z-index: 999999;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
}

.image-modal.active {
  opacity: 1;
  visibility: visible;
}

.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}

  .modal-content {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 300px 20px 40px 20px !important;
    box-sizing: border-box;
  }

  .modal-close {
    position: absolute;
    top: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background-color: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    color: white;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 1000001;
  }

.modal-close:hover {
  background-color: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
  transform: scale(1.1);
}

.modal-image-container {
  position: relative;
  max-width: 90%;
  max-height: 70vh;
  background-color: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  padding: 40px;
  margin-bottom: 30px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.modal-image-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: white;
  border-radius: 15px;
  z-index: -1;
}

.modal-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  display: block;
  margin: 0 auto;
}

.modal-thumbnails {
  display: flex;
  gap: 15px;
  margin-bottom: 20px;
  justify-content: center;
  flex-wrap: wrap;
}

.modal-thumbnail-item {
  width: 70px;
  height: 70px;
  border-radius: 10px;
  overflow: hidden;
  cursor: pointer;
  border: 3px solid transparent;
  transition: all 0.3s ease;
  background-color: rgba(255, 255, 255, 0.1);
}

.modal-thumbnail-item:hover {
  border-color: rgba(107, 224, 63, 0.6);
  transform: scale(1.05);
}

.modal-thumbnail-item.active {
  border-color: #6BE03F;
  transform: scale(1.1);
}

.modal-thumbnail-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.modal-navigation {
  display: flex;
  gap: 20px;
  justify-content: center;
  align-items: center;
}

.modal-nav-btn {
  width: 50px;
  height: 50px;
  background-color: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  color: white;
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.modal-nav-btn:hover {
  background-color: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
  transform: scale(1.1);
}

.modal-nav-btn:active {
  transform: scale(0.95);
}

/* Product Detail Styles */
.product-detail-hero {
  min-height: 100vh;
  background-color: #070707;
  position: relative;
  padding: 100px 0 50px 0;
}

.site-background-overlay {
  position: absolute;
  top: 0;
  right: 0;
  width: 60vw;
  height: 100%;
  background-image: url('/img/sections/background-bg.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: right center;
  opacity: 0.3;
  z-index: 1;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 40px;
  position: relative;
  z-index: 2;
}

/* Product Header */
.product-header {
  text-align: center;
  margin-bottom: 60px;
}

.product-badges {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 30px;
}

.product-badge {
  padding: 8px 20px;
  border-radius: 20px;
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 12px;
  letter-spacing: 1px;
}

.product-badge.brushless {
  background-color: #6BE03F;
  color: #000000;
}

.product-badge.heavy-duty {
  background-color: #000000;
  color: #6BE03F;
}

.product-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: clamp(48px, 8vw, 80px);
  color: #6BE03F;
  margin-bottom: 15px;
  line-height: 1.1;
}

.product-category {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: clamp(18px, 3vw, 24px);
  color: var(--color-white);
  margin-bottom: 0;
}

/* Product Main Layout */
.product-main {
  display: grid;
  grid-template-columns: 300px 1fr 250px;
  gap: 60px;
  margin-bottom: 80px;
  align-items: start;
}

/* Feature Cards Sidebar */
.product-features-sidebar {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.feature-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  padding: 20px;
  transition: all 0.3s ease;
}

.feature-card:hover {
  border-color: #6BE03F;
  transform: translateY(-2px);
}

.feature-icon {
  font-size: 24px;
  margin-bottom: 10px;
}

.feature-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 14px;
  color: var(--color-white);
  margin-bottom: 8px;
  line-height: 1.2;
}

.feature-description {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.4;
}

/* Product Image Main */
.product-image-main {
  display: flex;
  justify-content: center;
  align-items: center;
}

.product-image-slider {
  display: flex;
  flex-direction: column;
  gap: 20px;
  align-items: center;
}

.product-image-container-main {
  position: relative;
  background-color: #ffffff;
  border-radius: 20px;
  padding: 40px;
  width: 750px;
  height: 600px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s ease;
}

.product-image-main-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

/* Click to Zoom Overlay */
.click-zoom-overlay {
  position: absolute;
  bottom: 20px;
  left: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 10px 15px;
  border-radius: 25px;
  font-size: 12px;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 2;
}

.product-image-container-main:hover .click-zoom-overlay {
  opacity: 1;
}

.zoom-icon {
  font-size: 16px;
}

.zoom-text {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 11px;
  white-space: nowrap;
}

/* Thumbnail Gallery */
.product-thumbnails {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

.thumbnail-item {
  width: 80px;
  height: 80px;
  background: #ffffff;
  border-radius: 12px;
  padding: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.thumbnail-item:hover {
  border-color: #6BE03F;
  transform: translateY(-2px);
}

.thumbnail-item.active {
  border-color: #6BE03F;
  box-shadow: 0 4px 15px rgba(107, 224, 63, 0.3);
}

.thumbnail-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 8px;
}

/* Fullscreen Image Modal */
.image-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 9999;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.image-modal.active {
  opacity: 1;
  visibility: visible;
}

.modal-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(10px);
  cursor: pointer;
  z-index: 1;
  pointer-events: auto;
}

.modal-content {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 40px 40px 40px;
  pointer-events: auto;
  cursor: default;
  z-index: 2;
}

.modal-close {
  position: absolute;
  top: 30px;
  right: 30px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.modal-close:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.1);
}

.modal-image-container {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 1200px;
  margin-bottom: 30px;
  background: #ffffff;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.modal-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 15px;
  transition: transform 0.3s ease;
}

.modal-thumbnails {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 20px;
}

.modal-thumbnail-item {
  width: 80px;
  height: 80px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  backdrop-filter: blur(10px);
}

.modal-thumbnail-item:hover {
  border-color: #6BE03F;
  transform: translateY(-2px);
  background: rgba(255, 255, 255, 0.15);
}

.modal-thumbnail-item.active {
  border-color: #6BE03F;
  box-shadow: 0 4px 15px rgba(107, 224, 63, 0.4);
  background: rgba(107, 224, 63, 0.1);
}

.modal-thumbnail-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 8px;
}

.modal-navigation {
  display: flex;
  gap: 20px;
}

.modal-nav-btn {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.modal-nav-btn:hover {
  background: rgba(107, 224, 63, 0.2);
  transform: scale(1.1);
}

.modal-nav-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  transform: none;
}

/* Related Products Section */
.related-products-section {
  padding: 80px 0;
  background: var(--color-bg-dark);
}

.related-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 42px;
  color: var(--color-white);
  text-align: center;
  margin-bottom: 60px;
}

.highlight-text {
  color: #6BE03F;
}

.related-products-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 40px;
  max-width: 1200px;
  margin: 0 auto;
}

.related-products-grid.two-products {
  grid-template-columns: repeat(2, 1fr);
  max-width: 800px;
  justify-items: center;
}

.related-product-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  padding: 25px;
  transition: all 0.3s ease;
  text-align: center;
}

.related-product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(107, 224, 63, 0.15);
  border-color: rgba(107, 224, 63, 0.3);
}

.related-product-image {
  position: relative;
  background: #ffffff;
  border-radius: 15px;
  padding: 30px;
  margin-bottom: 25px;
  height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.related-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.related-voltage-icon {
  position: absolute;
  bottom: 15px;
  right: 15px;
}

.voltage-icon {
  width: 35px;
  height: 35px;
}

.related-product-info {
  text-align: left;
}

.related-product-name {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 20px;
  color: var(--color-white);
  margin-bottom: 12px;
}

.related-product-specs {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 20px;
}

.related-product-link {
  font-family: 'GeneralSans-Semibold', sans-serif;
  font-weight: 600;
  font-size: 14px;
  color: #6BE03F;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s ease;
}

.related-product-link:hover {
  color: #ffffff;
  transform: translateX(5px);
}

.product-voltage-badge {
  position: absolute;
  bottom: 30px;
  right: 30px;
  z-index: 4;
}

.voltage-badge-main {
  background: #000000;
  color: #ffffff;
  border-radius: 15px;
  padding: 15px 20px;
  text-align: center;
  min-width: 120px;
}

.voltage-number {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 32px;
  display: block;
  line-height: 1;
}

.voltage-label {
  display: flex;
  flex-direction: column;
  margin-top: 5px;
}

.vpack-text {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 12px;
  color: #6BE03F;
}

.lithium-text {
  font-family: 'GeneralSans-Semibold', sans-serif;
  font-weight: 600;
  font-size: 10px;
  color: #ffffff;
}

.capacity-text {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 14px;
  color: #6BE03F;
  margin-top: 2px;
}

/* Package Info Sidebar */
.package-info-sidebar {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}

.package-content-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  padding: 25px;
  width: 100%;
  backdrop-filter: blur(10px);
}

.package-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid rgba(107, 224, 63, 0.2);
}

.package-icon {
  font-size: 24px;
}

.package-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 18px;
  color: var(--color-white);
  margin: 0;
}

.package-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.package-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 10px;
  transition: all 0.3s ease;
}

.package-item:hover {
  background: rgba(107, 224, 63, 0.05);
  transform: translateX(5px);
}

.item-icon {
  font-size: 18px;
  width: 24px;
  text-align: center;
}

.item-text {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 14px;
  color: var(--color-white);
  flex-grow: 1;
}

.item-check {
  color: #6BE03F;
  font-weight: bold;
  font-size: 16px;
}

.package-badge {
  background: linear-gradient(135deg, #6BE03F 0%, #4CAF50 100%);
  color: #000000;
  border-radius: 12px;
  padding: 15px;
  text-align: center;
  position: relative;
}

.vpack-logo {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 16px;
  margin-bottom: 5px;
}

.compatible-text {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 12px;
}

/* Battery Specs */
.battery-specs {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.spec-circle {
  width: 100px;
  height: 100px;
  background: linear-gradient(135deg, #6BE03F 0%, #4CAF50 100%);
  color: #000000;
  border-radius: 50%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 15px;
  box-sizing: border-box;
  flex-shrink: 0;
  box-shadow: 0 4px 15px rgba(107, 224, 63, 0.3);
}

.spec-value {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 13px;
  margin-bottom: 2px;
  line-height: 1.1;
}

.spec-label {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 9px;
  line-height: 1;
  text-transform: uppercase;
}

/* Storage Features */
.storage-features {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.storage-feature {
  display: flex;
  align-items: center;  
  gap: 12px;
  padding: 12px;
  background: rgba(107, 224, 63, 0.05);
  border-radius: 10px;
  border-left: 3px solid #6BE03F;  
}

.feature-icon {
  font-size: 20px;
}

.storage-feature span {
  font-family: 'GeneralSans-Semibold', sans-serif;
  font-weight: 600;
  font-size: 14px;
  color: var(--color-white);
}

/* Technical Specifications */
.tech-specs {
  margin-top: 80px;
}

.tech-specs-header {
  margin-bottom: 30px;
}

.tech-specs-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 24px;
  color: #6BE03F;
  text-align: center;
  background: rgba(107, 224, 63, 0.1);
  padding: 15px 30px;
  border-radius: 10px;
  display: inline-block;
  width: 100%;
  box-sizing: border-box;
}

.tech-specs-table {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  overflow: hidden;
}

.spec-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 30px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.spec-row:last-child {
  border-bottom: none;
}

.spec-label {
  font-family: 'GeneralSans-Semibold', sans-serif;
  font-weight: 600;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.8);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.spec-value {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 16px;
  color: var(--color-white);
}

/* Related Products */
.related-products-section {
  background-color: rgba(255, 255, 255, 0.02);
  padding: 80px 0;
}

.related-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: clamp(32px, 5vw, 48px);
  color: var(--color-white);
  text-align: center;
  margin-bottom: 50px;
}

.highlight-text {
  color: #6BE03F;
}

.related-products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 0 auto;
}

.related-product-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  padding: 25px;
  transition: all 0.3s ease;
}

.related-product-card:hover {
  transform: translateY(-5px);
  border-color: #6BE03F;
  box-shadow: 0 10px 40px rgba(107, 224, 63, 0.15);
}

.related-product-image {
  position: relative;
  background-color: #ffffff;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  height: 180px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.related-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.related-voltage-icon {
  position: absolute;
  bottom: 10px;
  right: 10px;
  z-index: 4;
}

.voltage-icon {
  width: auto;
  height: 30px;
}

.related-product-info {
  text-align: center;
}

.related-product-name {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 18px;
  color: var(--color-white);
  margin-bottom: 10px;
}

.related-product-specs {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 15px;
}

.related-product-link {
  font-family: 'GeneralSans-Semibold', sans-serif;
  font-weight: 600;
  font-size: 14px;
  color: #6BE03F;
  text-decoration: none;
  transition: color 0.3s ease;
}

.related-product-link:hover {
  color: #ffffff;
}

/* Footer Styles - Copy from index.astro */
.footer-section {
  background-color: #6BE03F;
  padding: 60px 0 30px 0;
  margin-top: 100px;
}

.footer-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 40px;
}

.footer-logo-img {
  height: 60px;
  width: auto;
}

.footer-main {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  width: 100%;
  max-width: 800px;
}

.footer-company-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 24px;
  color: #000000;
  margin-bottom: 15px;
  text-align: left;
}

.footer-company-desc {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 16px;
  color: #000000;
  max-width: 300px;
  line-height: 1.5;
}

.footer-contact {
  display: flex;
  gap: 50px;
}

.footer-contact-title {
  font-family: 'GeneralSans-Bold', sans-serif;
  font-weight: 700;
  font-size: 16px;
  color: #000000;
  margin-bottom: 10px;
}

.footer-contact-text {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 14px;
  color: #000000;
  line-height: 1.6;
}

.footer-link {
  color: #000000;
  text-decoration: none;
  transition: opacity 0.3s ease;
}

.footer-link:hover {
  opacity: 0.7;
}

.footer-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding-top: 30px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.footer-social {
  display: flex;
  gap: 20px;
}

.social-link {
  color: #6BE03F;
  transition: color 0.3s ease;
}

.social-link:hover {
  color: #000000;
}

.footer-copyright {
  font-family: 'GeneralSans-Regular', sans-serif;
  font-size: 14px;
  color: #000000;
}

/* Animations */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-in {
  animation: slideInUp 0.6s ease-out forwards;
  opacity: 0;
}

/* Responsive Design */
@media (max-width: 1200px) {
  .product-main {
    grid-template-columns: 250px 1fr 200px;
    gap: 40px;
  }
  
  .product-image-container-main {
    width: 600px;
    height: 500px;
    padding: 30px;
  }
  
  .thumbnail-item {
    width: 70px;
    height: 70px;
  }
}

@media (max-width: 968px) {
  .product-main {
    grid-template-columns: 1fr;
    gap: 40px;
    text-align: center;
  }
  
  .product-features-sidebar {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
  }
  
  .product-image-container-main {
    width: 500px;
    height: 400px;
    padding: 25px;
    margin: 0 auto;
  }
  
  .package-info-sidebar {
    max-width: 400px;
    margin: 0 auto;
  }
  
  .thumbnail-item {
    width: 60px;
    height: 60px;
  }
  
  .product-thumbnails {
    gap: 10px;
  }
  
  /* Modal Responsive */
  .modal-content {
    padding: 250px 20px 30px 20px !important;
  }
  
  .modal-close {
    top: 20px;
    right: 20px;
    width: 45px;
    height: 45px;
  }
  
  .modal-image-container {
    padding: 30px;
    margin-bottom: 25px;
  }
  
  .modal-thumbnails {
    gap: 10px;
  }
  
  .modal-thumbnail-item {
    width: 60px;
    height: 60px;
  }
  
  /* Related Products Responsive */
  .related-products-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
  }
  
  .related-products-grid.two-products {
    grid-template-columns: repeat(2, 1fr);
    max-width: 700px;
  }
  
  .related-title {
    font-size: 36px;
    margin-bottom: 50px;
  }
  
  .related-product-image {
    height: 180px;
    padding: 25px;
  }
  
  .related-product-name {
    font-size: 18px;
  }

}

@media (max-width: 768px) {
  .container {
    padding: 0 20px;
  }
  
  .product-detail-hero {
    padding: 90px 0 30px 0;
  }
  
  .product-features-sidebar {
    grid-template-columns: 1fr;
  }
  
  .product-image-container-main {
    width: 350px;
    height: 300px;
    padding: 20px;
  }
  
  .thumbnail-item {
    width: 50px;
    height: 50px;
  }
  
  .product-thumbnails {
    gap: 8px;
  }
  
  .package-content-card {
    padding: 20px;
  }
  
  .package-title {
    font-size: 16px;
  }
  
  .item-text {
    font-size: 13px;
  }
  
  .battery-specs {
    gap: 15px;
  }
  
  .spec-circle {
    width: 85px;
    height: 85px;
    padding: 12px;
  }
  
  .spec-value {
    font-size: 12px;
  }
  
  .spec-label {
    font-size: 8px;
  }
  
  
  /* Related Products Mobile */
  .related-products-grid {
    grid-template-columns: 1fr;
    gap: 25px;
  }
  
  .related-products-grid.two-products {
    grid-template-columns: 1fr;
    max-width: 400px;
  }
  
  .related-title {
    font-size: 32px;
    margin-bottom: 40px;
  }
  
  .related-product-image {
    height: 160px;
    padding: 20px;
  }
  
  .related-product-name {
    font-size: 16px;
  }
  
  .related-product-specs {
    font-size: 13px;
  }
  
  .footer-main {
    flex-direction: column;
    gap: 30px;
    text-align: center;
  }
  
  .footer-contact {
    flex-direction: column;
    gap: 20px;
  }
  
  .footer-bottom {
    flex-direction: column;
    gap: 20px;
  }
}

@media (max-width: 480px) {
  .product-badges {
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }
  
  .product-image-container-main {
    width: 280px;
    height: 250px;
    padding: 15px;
  }
  
  .thumbnail-item {
    width: 45px;
    height: 45px;
  }
  
  .product-thumbnails {
    gap: 5px;
  }
  
  .package-item {
    padding: 8px;
  }
  
  .item-text {
    font-size: 12px;
  }
  
  .storage-feature {
    padding: 10px;
  }
  
  .storage-feature span {
    font-size: 13px;
  }
  
  /* Modal Mobile */
  .modal-content {
    padding: 40px 15px 25px 15px;
  }
  
  .modal-close {
    top: 15px;
    right: 15px;
    width: 40px;
    height: 40px;
  }
  
  .modal-image-container {
    padding: 25px;
    margin-bottom: 20px;
  }
  
  .modal-thumbnails {
    gap: 8px;
    margin-bottom: 15px;
  }
  
  .modal-thumbnail-item {
    width: 50px;
    height: 50px;
  }
  
  .modal-navigation {
    gap: 15px;
  }
  
  .modal-nav-btn {
    width: 45px;
    height: 45px;
  }
  
  .click-zoom-overlay {
    bottom: 15px;
    left: 15px;
    padding: 8px 12px;
  }
  
  .zoom-text {
    font-size: 10px;
  }
  
  .spec-row {
    flex-direction: column;
    gap: 10px;
    text-align: center;
  }
  
  .related-products-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  /* Modal XS Mobile */
  .modal-content {
    padding: 200px 10px 20px 10px !important;
  }
  
  .modal-image-container {
    padding: 20px;
    margin-bottom: 15px;
  }
  
  .modal-thumbnails {
    gap: 5px;
  }
  
  .modal-thumbnail-item {
    width: 45px;
    height: 45px;
  }
  
  .modal-nav-btn {
    width: 40px;
    height: 40px;
  }
  
  .click-zoom-overlay {
    display: none; /* Hide on very small screens */
  }
  
  /* Related Products XS Mobile */
  .related-title {
    font-size: 28px;
    margin-bottom: 30px;
  }
  
  .related-product-image {
    height: 140px;
    padding: 15px;
  }
  
  .related-product-card {
    padding: 20px;
  }
  
  .related-product-name {
    font-size: 15px;
    margin-bottom: 10px;
  }
  
  .related-product-specs {
    font-size: 12px;
    margin-bottom: 15px;
  }
  
  .related-product-link {
    font-size: 13px;
  }
  
  /* Battery Specs XS Mobile */
  .battery-specs {
    gap: 12px;
  }
  
  .spec-circle {
    width: 75px;
    height: 75px;
    padding: 10px;
  }
  
  .spec-value {
    font-size: 11px;
  }
  
  .spec-label {
    font-size: 7px;
  }
  
  /* Footer Mobile Styles */
  .footer-section {
    margin-top: 60px;
    padding: 40px 0;
  }
  
  .footer-content {
    gap: 25px;
    padding: 0 15px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  .footer-logo {
    margin-bottom: 15px;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
  }
  
  .footer-main {
    gap: 25px;
    text-align: center;
    flex-direction: column;
    width: 100%;
    align-items: center;
  }
  
  .footer-contact {
    gap: 20px;
    flex-direction: column;
    text-align: center;
    width: 100%;
    align-items: center;
  }
  
  .footer-company {
    text-align: center;
    width: 100%;
  }
  
  .footer-address, 
  .footer-email {
    text-align: center;
    width: 100%;
  }
  
  .footer-bottom {
    gap: 15px;
    flex-direction: column;
    text-align: center;
    padding-top: 20px;
  }
  
  .footer-logo-img {
    height: 40px;
  }
  
  .footer-company-title {
    font-size: clamp(16px, 4vw, 18px);
    margin-bottom: 8px;
    text-align: center;
  }
  
  .footer-company-desc {
    font-size: clamp(12px, 3vw, 13px);
    line-height: 1.4;
  }
  
  .footer-contact-title {
    font-size: clamp(13px, 3.5vw, 14px);
    margin-bottom: 5px;
  }
  
  .footer-contact-text {
    font-size: clamp(11px, 3vw, 12px);
    line-height: 1.4;
  }
  
  .footer-copyright {
    font-size: clamp(10px, 3vw, 12px);
    line-height: 1.3;
  }
  
  .social-link {
    width: 38px;
    height: 38px;
  }
  
  .footer-social {
    justify-content: center;
    margin-bottom: 10px;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Multiple Image Gallery Functionality
  const mainImage = document.getElementById('mainProductImage');
  const thumbnails = document.querySelectorAll('.thumbnail-item');
  const mainImageContainer = document.getElementById('mainImageContainer');

  // Thumbnail click handler
  thumbnails.forEach((thumbnail, index) => {
    thumbnail.addEventListener('click', function() {
      // Remove active class from all thumbnails
      thumbnails.forEach(t => t.classList.remove('active'));
      
      // Add active class to clicked thumbnail
      thumbnail.classList.add('active');
      
      // Update main image
      const newImage = thumbnail.dataset.image;
      const newHdImage = thumbnail.dataset.hdImage;
      
      if (mainImage && newImage) {
        mainImage.src = newImage;
        mainImage.dataset.hdSrc = newHdImage;
        
        // Update modal image as well for lightbox
        updateModalImages(index);
      }
    });
  });

  // Update modal images when thumbnail is clicked
  function updateModalImages(activeIndex) {
    const modalImage = document.querySelector('.modal-image');
    const modalThumbnails = document.querySelectorAll('.modal-thumbnail-item');
    
    if (modalImage) {
      modalImage.src = thumbnails[activeIndex].dataset.hdImage || thumbnails[activeIndex].dataset.image;
    }
    
    // Update modal thumbnails active state
    modalThumbnails.forEach((modalThumb, index) => {
      modalThumb.classList.toggle('active', index === activeIndex);
    });
  }

  // Lightbox/Modal functionality
  const clickOverlay = document.querySelector('.click-zoom-overlay');
  const modal = document.getElementById('imageModal');
  const modalClose = document.querySelector('.modal-close');
  const modalOverlay = document.querySelector('.modal-overlay');

  // Open modal
  if (clickOverlay && modal) {
    clickOverlay.addEventListener('click', function() {
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Set initial modal image to current main image
      const modalImage = document.querySelector('.modal-image');
      if (modalImage && mainImage) {
        modalImage.src = mainImage.dataset.hdSrc || mainImage.src;
      }
    });
  }

  // Close modal
  function closeModal() {
    if (modal) {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }
  }

  if (modalClose) {
    modalClose.addEventListener('click', closeModal);
  }

  if (modalOverlay) {
    modalOverlay.addEventListener('click', closeModal);
  }

  // ESC key to close modal
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && modal && modal.classList.contains('active')) {
      closeModal();
    }
  });

  // Modal thumbnail navigation
  const modalThumbnails = document.querySelectorAll('.modal-thumbnail-item');
  modalThumbnails.forEach((modalThumb, index) => {
    modalThumb.addEventListener('click', function() {
      // Update main modal image
      const modalImage = document.querySelector('.modal-image');
      if (modalImage && thumbnails[index]) {
        modalImage.src = thumbnails[index].dataset.hdImage;
        
        // Update modal thumbnails active state
        modalThumbnails.forEach(t => t.classList.remove('active'));
        modalThumb.classList.add('active');
        
        // Update main page thumbnail as well
        thumbnails.forEach(t => t.classList.remove('active'));
        thumbnails[index].classList.add('active');
        
        // Update main image
        mainImage.src = thumbnails[index].dataset.image;
        mainImage.dataset.hdSrc = thumbnails[index].dataset.hdImage;
      }
    });
  });

  // Modal navigation buttons (previous/next)
  const modalPrevBtn = document.querySelector('.modal-nav-prev');
  const modalNextBtn = document.querySelector('.modal-nav-next');
  
  let currentImageIndex = 0;

  if (modalPrevBtn) {
    modalPrevBtn.addEventListener('click', function() {
      currentImageIndex = (currentImageIndex - 1 + thumbnails.length) % thumbnails.length;
      updateModalImage(currentImageIndex);
    });
  }

  if (modalNextBtn) {
    modalNextBtn.addEventListener('click', function() {
      currentImageIndex = (currentImageIndex + 1) % thumbnails.length;
      updateModalImage(currentImageIndex);
    });
  }

  function updateModalImage(index) {
    const modalImage = document.querySelector('.modal-image');
    if (modalImage && thumbnails[index]) {
      modalImage.src = thumbnails[index].dataset.hdImage;
      
      // Update all thumbnail states
      thumbnails.forEach(t => t.classList.remove('active'));
      thumbnails[index].classList.add('active');
      
      modalThumbnails.forEach(t => t.classList.remove('active'));
      modalThumbnails[index].classList.add('active');
      
      // Update main page image
      mainImage.src = thumbnails[index].dataset.image;
      mainImage.dataset.hdSrc = thumbnails[index].dataset.hdImage;
    }
  }

  // Touch/swipe support for modal
  let touchStartX = 0;
  let touchEndX = 0;

  if (modal) {
    modal.addEventListener('touchstart', function(e) {
      touchStartX = e.changedTouches[0].screenX;
    });

    modal.addEventListener('touchend', function(e) {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });
  }

  function handleSwipe() {
    const swipeThreshold = 50;
    const diff = touchStartX - touchEndX;

    if (Math.abs(diff) > swipeThreshold) {
      if (diff > 0) {
        // Swipe left - next image
        currentImageIndex = (currentImageIndex + 1) % thumbnails.length;
      } else {
        // Swipe right - previous image
        currentImageIndex = (currentImageIndex - 1 + thumbnails.length) % thumbnails.length;
      }
      updateModalImage(currentImageIndex);
    }
  }

  // Keyboard navigation (arrow keys)
  document.addEventListener('keydown', function(e) {
    if (modal && modal.classList.contains('active')) {
      if (e.key === 'ArrowLeft') {
        e.preventDefault();
        currentImageIndex = (currentImageIndex - 1 + thumbnails.length) % thumbnails.length;
        updateModalImage(currentImageIndex);
      } else if (e.key === 'ArrowRight') {
        e.preventDefault();
        currentImageIndex = (currentImageIndex + 1) % thumbnails.length;
        updateModalImage(currentImageIndex);
      }
    }
  });
});
</script> 